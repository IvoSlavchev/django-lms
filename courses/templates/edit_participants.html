{% extends 'base.html' %}

{% block header_text %}
	{% if messages %}
	    {% for message in messages %}
	    	{{ message }}
	    {% endfor %}
	{% else %}
		{{ course.name }}
	{% endif %}
{% endblock %}

{% block filter %}
	<br>
	<input class="col-md-offset-5" type="text" id="id_search" placeholder="Filter participants">
	<br>
	<br>
{% endblock %}

{% block form_action %}{% url 'edit_participants' course.id %}{% endblock %}

{% block button %}
	<button class="btn btn-primary" id="id_submit" type="submit" name="update">Update</button>	
{% endblock %}

{% block dashboard %}
	<a href="{% url 'edit_course' course.id %}">
		<span class="glyphicon glyphicon-arrow-left"></span>
		Back to course
	</a>
{% endblock %}

{% block javascript %}
	<script type="text/javascript">
		var participants = [];
		
		{% for participant in participants %}
			participants.push({{ participant.user.id }});
		{% endfor %}

		$(":checkbox").each(function() {
			if (participants.indexOf(parseInt($(this).attr("value"))) != -1) {
				$(this).attr("checked", true);
			}
		});

		$('#id_search').keyup(function() {
			var filter = $(this).val();
			$(':checkbox').each(function() {
				if ($(this).parent().text().indexOf(filter) != -1) {
					$(this).show();
					$(this).parent().show();
				} else {
					$(this).hide();
					$(this).parent().hide();
				}
			});
		});
	</script>
{% endblock %}